<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize

// properties
_ex_timers            = -1;
_ex_timer_classes     = -1;
_ex_timer_debug_mode  = false;
_suspended            = false;
_version              = "1.0.4";

// extension database
enum _ex_timer {
    _name,
    _position,
    _speed,
    _is_playing,
    _is_paused,
    _sync,
    _oncomplete,
    _oncomplete_arguments,
    _duration,
    _loop,
    _local,
    _sync_delta,
    _length
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Update timers

if (_suspended == true) {
    exit;
}

// count timers
if (not ds_exists(_ex_timers, ds_type_grid)) {
    exit;
}

var _ds_height = ds_grid_height(_ex_timers);
if (_ds_height &lt; 2) {

    if (_ex_timers[# 0, 0] == "") {
        exit;
    }

}

var _ex_timer_count = ds_grid_height(_ex_timers);

while (--_ex_timer_count &gt;= 0) {

    var _i = _ex_timer_count;

    var _name = _ex_timers[# _ex_timer._name, _i];

    var _y = ds_grid_value_y(_ex_timers, 0, 0, 1, ds_grid_height(_ex_timers), _name);
    
    if (_y &lt; 0) {
        continue;
    }
    
    var _is_playing = _ex_timers[# _ex_timer._is_playing, _y];
    var _is_paused  = _ex_timers[# _ex_timer._is_paused,  _y];
    
    // check paused or playing states
    if (_is_paused == true or not _is_playing == true) {
        continue;
    }
    
    var _timer_position = _ex_timers[# _ex_timer._position, _y];
    var _timer_duration = _ex_timers[# _ex_timer._duration, _y];
    var _timer_loop     = _ex_timers[# _ex_timer._loop,  _y];
    var _timer_speed    = _ex_timers[# _ex_timer._speed, _y];
    var _timer_sync     = _ex_timers[# _ex_timer._sync_delta, _y];
    var _sync = 1.0;
    
    if (_timer_sync == true) {
        _sync = (delta_time / (1000000 / room_speed));
        _timer_speed *= _sync;
    }
    
    _timer_position -= _timer_speed;
    
    if (_timer_position &lt; 0) {
    
        _timer_position = -1;
    
        // set position
        _ex_timers[# _ex_timer._position, _y] = -1;
        
        // if timer is playing
        if (_is_playing == true) {
            // get script
            var _script = _ex_timers[# _ex_timer._oncomplete, _y];
            
            if (_script &gt; -1) {
                
                var _script_args = _ex_timers[# _ex_timer._oncomplete_arguments, _y];
                
                if (is_real(_script_args) or is_string(_script_args)) {
                    
                    if (_script_args == ex_timer_arguments_undefined) {
                        script_execute(_script);
                    } else {
                        script_execute(_script, _script_args);
                    }
                
                } else if (is_array(_script_args)) {
                
                    
                    var _length = array_length_1d(_script_args);
                    
                    switch (_length) {
                        case 0: script_execute(_script); break;
                        case 1: script_execute(_script, _script_args[0]); break;
                        case 2: script_execute(_script, _script_args[0], _script_args[1]); break;
                        case 3: script_execute(_script, _script_args[0], _script_args[1], _script_args[2]); break;
                        case 4: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3]); break;
                        case 5: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3], _script_args[4]); break;
                        case 6: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3], _script_args[4], _script_args[5]); break;
                        case 7: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3], _script_args[4], _script_args[5], _script_args[6]); break;
                        case 8: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3], _script_args[4], _script_args[5], _script_args[6], _script_args[7]); break;
                        case 9: script_execute(_script, _script_args[0], _script_args[1], _script_args[2], _script_args[3], _script_args[4], _script_args[5], _script_args[6], _script_args[7], _script_args[8]); break;
                        // ...
                        default: 
                            if (ex_timer_get_debug_mode()) {
                                show_debug_message('exTimer: Error in timer with name: "'+string( _name )+'", onComplete script to trigger has too few (less than 0) or too many arguments (max 9 [0-8] allowed)');
                            }
                            break;
                    }
                
                } else {
                    
                    script_execute(_script);
                }
            }
        }
        
        if (_timer_loop == true) {
            _timer_position = _timer_duration;
        } else {
    
            // stop timer
            
            // set position
            _timer_position = -1;
            _ex_timers[# _ex_timer._position, _y] = -1;
            
            // set playing state
            _ex_timers[# _ex_timer._is_playing, _y] = false;
            
            // set paused state
            _ex_timers[# _ex_timer._is_paused, _y] = false;
            
            // set loop
            _ex_timers[# _ex_timer._loop, _y] = false;
            
            if (ex_timer_get_debug_mode()) {
                show_debug_message('exTimer: Timer with name: "'+string(_name)+'" has triggered');
            }
            
            var _is_local = _ex_timers[# _ex_timer._local, _y];
            
            if (_is_local == 1) {
                ex_timer_destroy(_name);
                if (ex_timer_get_debug_mode()) {
                    show_debug_message('exTimer: Timer "'+string(_name)+'" is local, auto-removed');
                }
            }
            
            continue;
        }
    }
    
    _ex_timers[# _ex_timer._position, _y] = floor(_timer_position);
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Cleanup local timers

var _i = ex_timer_count();

if (_i &lt;= 0) {
    if (ex_timer_get_debug_mode()) {
        show_debug_message('exTimer: No local timers present to cleanup'); 
    }
    exit;
}

if (ex_timer_get_debug_mode()) {
    show_debug_message('exTimer: Started cleaning up local timers...');
}

var _local_timers = 0;
while (_i--) {
    
    var _local = _ex_timers[# _ex_timer._local, _i];
    var _name  = _ex_timers[# _ex_timer._name, _i];
    
    if (_local == true) {
        
        ex_timer_ds_grid_delete_y(_ex_timers, _i, true);
        
        if (ex_timer_get_debug_mode()) {
            show_debug_message("exTimer: Removed local timer: "+string(_name));
        }
        _local_timers += 1;
        
    }

}

if (ex_timer_get_debug_mode()) {
    show_debug_message('exTimer: Finished cleaning up local timers, total removed: '+string(_local_timers));
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
